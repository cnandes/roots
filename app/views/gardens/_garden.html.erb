<div class="card my-3">
  <div class="card-header garden-header">
    <div class="d-flex justify-content-between">
      <div>
        <%# ------------- Link to Garden Show ------------- %>
        <h2><%= link_to garden.name, garden_path(garden) %></h2>
      </div>

      <%# Menu button %>
      <div class="btn-group dropdown">
        <button type="button" class="btn btn-light" data-bs-toggle="dropdown" aria-expanded="false">
          <i class="fa-solid fa-bars text-success" style="font-size: 22px;"></i>
        </button>
        <ul class="dropdown-menu" style="min-width: 153px;">

          <%# ------------- Icon link to Garden Show ------------- %>
          <li>
            <%= link_to ('<i class="fa-solid fa-binoculars"></i>').html_safe + " View Garden",
                garden_path(garden),
                class: "btn btn-light"
                %>
          </li>

          <%# ------------- Edit Button (Currently doesn't do anything) ------------- %>
          <li>
            <%= render "partials/modal_edit_garden", garden: garden %>
          </li>

          <%# ------------- Delete Garden Button ------------- %>
          <li>
            <%= link_to ('<i class="fa-solid fa-trash-can"></i>').html_safe + " Delete Garden",
                garden,
                data: {turbo_method: :delete, turbo_confirm: "Are you sure you want to delete this garden?" },
                class: "btn btn-light"
                %>
          </li>
        </ul>
      </div>
    </div>
  </div>
  <div class="card-body garden current">
    <div class="d-flex flex-wrap justify-content-start">
      <% if garden.beds %>
        <%# ------------- Iterate over beds in garden ------------- %>
        <% garden.beds.each do |bed|%>
          <div class="mt-2 mx-4">
            <%# ------------- Bed description badge ------------- %>
            <span class="badge badge-primary mb-1"><%= bed.description %></span>
            <div class="card plot-bed">
              <div class="card-body current-crop-body">
                <div class="d-flex flex-wrap justify-content-around">
                  <%# ------------- Plot crop emojis in bed (max 12) ------------- %>
                  <% bed.planted_crops.first(12).each do |crop| %>

                    <%# ------------- If 1-2 crops in bed ------------- %>
                    <% if bed.planted_crops.length <= 2 %>
                      <% 6.times do %>
                        <%= render "crops/crop_modal", crop: crop, bed: bed, season: crop.season %>
                      <% end %>

                    <%# ------------- If less that 4 crops in bed ------------- %>
                    <% elsif bed.planted_crops.length <= 4 %>
                      <% 3.times do %>
                        <%= render "crops/crop_modal", crop: crop, bed: bed, season: crop.season %>
                      <% end %>

                    <%# ------------- If 5-6 crops in bed ------------- %>
                    <% elsif bed.planted_crops.length <= 6 %>
                      <% 2.times do %>
                        <%= render "crops/crop_modal", crop: crop, bed: bed, season: crop.season %>
                      <% end %>

                    <%# ------------- If more than 6 crops in bed ------------- %>
                    <% else %>
                      <%= render "crops/crop_modal", crop: crop, bed: bed, season: crop.season %>
                    <% end %>
                  <% end %>
                </div>
              </div>
            </div>
          </div>
        <% end %>
      <% end %>
      <%# ------------- No Beds Display ------------- %>
      <% if garden.beds.empty? %>
        <div class="card no-plot-bed" style="padding: 120px 30px;">
          <div class="align-self-center">
            <%= link_to "Get Started", garden_path(garden),
                class: "btn btn-secondary btn-sm btn-pulse-secondary" %>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>
